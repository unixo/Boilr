{% set secondaryMenu = 'Amministrazione' %}
{% extends 'BoilrBundle:Default:template5.html.twig' %}
{% form_theme form 'BoilrBundle:Form:fields.html.twig' %}

{% block extra_header %}
<style>
#table_roles label {
    width: 90%;
    text-align: left;
}
</style>
{% endblock %}

{% block central_block %}
<h2>{{ (optype == 'add')?"Nuovo":"Modifica" }} utente</h2>

<form id="form_user" action="{{ app.request.requestUri }}" method="post" {{ form_enctype(form) }} >
    <fieldset>
        <legend>Scheda utente</legend>

        {{ form_row(form.name) }}
        {{ form_row(form.surname) }}
        {{ form_row(form.isActive) }}
    </fieldset>

    <fieldset>
        <legend>Credenziali d'accesso</legend>

        {% if user.id is null %}
            {{ form_row(form.login) }}
        {% else %}
            <div><label>Login:</label><span>{{ user.login }}</span></div>
        {% endif %}
        <div><label>Password:</label>{{ form_widget(form.password.first) }}</div>
        <div><label>Ripeti Password:</label>{{ form_widget(form.password.second) }}</div>
    </fieldset>

    <fieldset>
        <legend>Profili autorizzativi</legend>

        <table id="table_roles">
        {% for group in form.groups %}
            <tr><td>{{ form_widget(group)}}</td><td>{{ form_label(group) }}</td></tr>
        {% endfor %}
        </table>
    </fieldset>

    <div style="background-color: white; opacity: 1; width: 100%; padding: 10px;">
        <a href="{{ url('template_list') }}">Torna al dettaglio</a>
        <input type="submit" value="Salva" />
    </div>

    {{ form_rest(form) }}
    {{ form_errors(form) }}
</form>
{% endblock %}